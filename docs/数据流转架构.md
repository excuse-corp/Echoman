# Echoman æ•°æ®æµè½¬æ¶æ„æ–‡æ¡£

> ç‰ˆæœ¬ï¼šv2.1  
> æ›´æ–°æ—¶é—´ï¼š2026-02-04  
> æè¿°ï¼šæœ¬æ–‡æ¡£è¯¦ç»†è¯´æ˜ Echoman ç³»ç»Ÿçš„æ•°æ®åº“è¡¨ç»“æ„ã€æ•°æ®æµè½¬é€»è¾‘å’Œå¤„ç†æµç¨‹  
> é‡è¦å˜æ›´ï¼šå››å‘¨æœŸå½’å¹¶ï¼ˆMORN/AM/PM/EVEï¼‰ä¸ event_merge/global_merge æµç¨‹å¯¹é½ï¼›çƒ­åº¦å½’ä¸€åŒ–åŠ å…¥å¹³å°æƒé‡ï¼›æ–°å¢ LLM åˆ¤å®šä¸å¯¹è¯ç›¸å…³è¡¨è¯´æ˜

---

## ğŸ“š ç›®å½•

1. [ç³»ç»Ÿæ¦‚è¿°](#ç³»ç»Ÿæ¦‚è¿°)
2. [æ•°æ®åº“è¡¨ç»“æ„](#æ•°æ®åº“è¡¨ç»“æ„)
3. [æ•°æ®æµè½¬æµç¨‹](#æ•°æ®æµè½¬æµç¨‹)
4. [è¡¨å…³ç³»å›¾](#è¡¨å…³ç³»å›¾)
5. [å…³é”®æµç¨‹è¯¦è§£](#å…³é”®æµç¨‹è¯¦è§£)

---

## ç³»ç»Ÿæ¦‚è¿°

Echoman æ˜¯ä¸€ä¸ªçƒ­ç‚¹è¯é¢˜è¿½è¸ªç³»ç»Ÿï¼Œé€šè¿‡ä»¥ä¸‹æµç¨‹å®ç°ä»æ•°æ®é‡‡é›†åˆ°è¯é¢˜åˆ†æçš„å®Œæ•´é“¾è·¯ï¼š

```
æ•°æ®é‡‡é›†ï¼ˆ8æ¬¡/å¤©ï¼‰ â†’ å™ªéŸ³è¿‡æ»¤ & å…¥åº“ â†’ çƒ­åº¦å½’ä¸€åŒ– â†’ å½’å¹¶é˜¶æ®µä¸€ï¼ˆevent_mergeï¼‰ â†’ å½’å¹¶é˜¶æ®µäºŒï¼ˆglobal_mergeï¼‰
â†’ è¯é¢˜åˆ†ç±» & AIæ‘˜è¦ â†’ å‰ç«¯æ•°æ®æ›´æ–° â†’ å¯¹è¯/RAG æ£€ç´¢å±•ç¤º
```

### æ ¸å¿ƒåŠŸèƒ½

- **å¤šå¹³å°é‡‡é›†**ï¼šä»å¾®åšã€çŸ¥ä¹ã€ä»Šæ—¥å¤´æ¡ã€æ–°æµªã€ç½‘æ˜“ã€ç™¾åº¦ã€è™æ‰‘ 7 ä¸ªå¹³å°é‡‡é›†çƒ­æœæ•°æ®ï¼ˆæ¯æ—¥ 8 æ¬¡ï¼Œ8:00-22:00ï¼‰
- **å››å‘¨æœŸå½’å¹¶**ï¼šæ¯æ—¥ 4 æ¬¡å½’å¹¶ï¼ˆæ¸…æ™¨ MORNã€ä¸Šåˆ AMã€ä¸‹åˆ PMã€å‚æ™š EVEï¼‰ï¼Œæ¯æ¬¡åŒ…å« 2 ä¸ªé˜¶æ®µ
  - **é˜¶æ®µä¸€ï¼ševent_mergeï¼ˆå†å²å halfday_mergeï¼‰** - çƒ­åº¦å½’ä¸€åŒ–ã€æ ‡é¢˜å½’ä¸€åŒ– + 2-gram Jaccardã€å‘é‡èšç±»ã€LLM åˆ¤å®šã€å‡ºç°æ¬¡æ•°è¿‡æ»¤
  - **é˜¶æ®µäºŒï¼šglobal_merge** - å‘é‡æ£€ç´¢å†å² Topicï¼ˆä¼˜å…ˆ topic_summary å‘é‡ï¼‰ï¼ŒLLM å…³è”åˆ¤å®šå¹¶ç”Ÿæˆ/æ›´æ–° Topic
- **åˆ†ç±»ç»Ÿè®¡**ï¼šå°†è¯é¢˜åˆ†ç±»ä¸ºå¨±ä¹ã€æ—¶äº‹ã€ä½“è‚²ä¸‰å¤§ç±»ï¼ˆæ”¯æŒç¼“å­˜ä¸æ¯æ—¥é‡ç®—ï¼‰
- **çƒ­åº¦è¿½è¸ª**ï¼šè®°å½•è¯é¢˜åœ¨æ¯ä¸ªå½’å¹¶å‘¨æœŸï¼ˆMORN/AM/PM/EVEï¼‰çš„çƒ­åº¦å˜åŒ–
- **AIæ‘˜è¦**ï¼šä½¿ç”¨ LLM ç”Ÿæˆå…¨é‡/å¢é‡/å ä½æ‘˜è¦ï¼Œå¹¶ä¸ºæ‘˜è¦ç”Ÿæˆå‘é‡
- **è‡ªç”±æ¨¡å¼å¯¹è¯**ï¼šglobal æ¨¡å¼éœ€è¦ free_tokenï¼›topic æ¨¡å¼åŸºäºæŒ‡å®šè¯é¢˜

> å½“å‰è¿è¡Œå£å¾„ï¼ˆ2026-02-04ï¼‰ï¼šå‘é‡å­˜å‚¨å·²ç»Ÿä¸€ä¸º Chromaï¼›`global_merge_new_topic_keep_ratio`=1.0ï¼Œå½“å‰ä¸åšæ–°å»º Topic çƒ­åº¦æˆªæ–­ï¼Œå…¨éƒ¨ä¿ç•™ã€‚

---

## æ•°æ®åº“è¡¨ç»“æ„

### 1. ğŸ“ source_itemsï¼ˆé‡‡é›†åŸå­é¡¹è¡¨ï¼‰

**ç”¨é€”**ï¼šå­˜å‚¨ä»å„å¹³å°é‡‡é›†çš„åŸå§‹æ–°é—»/çƒ­æœæ•°æ®

**å…³é”®å­—æ®µ**ï¼š

| å­—æ®µå | ç±»å‹ | è¯´æ˜ |
|--------|------|------|
| `id` | BigInteger | ä¸»é”®ID |
| `platform` | String(20) | å¹³å°åç§°ï¼ˆweibo/zhihu/toutiao/sina/netease/baidu/hupuï¼‰ |
| `title` | String(500) | æ ‡é¢˜ |
| `summary` | Text | æ‘˜è¦/æ­£æ–‡ |
| `url` | String(1000) | åŸæ–‡é“¾æ¥ |
| `published_at` | DateTime | å‘å¸ƒæ—¶é—´ |
| `fetched_at` | DateTime | æŠ“å–æ—¶é—´ |
| `interactions` | JSONB | äº’åŠ¨ä¿¡æ¯ï¼ˆè½¬/è¯„/èµ/é˜…/è—ï¼‰ |
| `heat_value` | Float | åŸå§‹çƒ­åº¦å€¼ |
| `heat_normalized` | Float | å½’å¹¶å‘¨æœŸå†…å½’ä¸€åŒ–çƒ­åº¦ï¼ˆ0-1ï¼‰ |
| `url_hash` | String(64) | URLå“ˆå¸Œï¼ˆMD5ï¼‰ï¼Œç”¨äºå»é‡ |
| `content_hash` | String(64) | å†…å®¹å“ˆå¸Œï¼ˆMD5ï¼‰ï¼Œç”¨äºå»é‡ |
| `dedup_key` | String(100) | å»é‡é”®ï¼ˆå”¯ä¸€çº¦æŸï¼ŒåŒ…å« run_idï¼Œè·¨è¿è¡Œä¸å»é‡ï¼‰ |
| `period_merge_group_id` | String(50) | å½’å¹¶ç»„ID |
| `period` | String(20) | å½’å¹¶æ—¶æ®µï¼ˆå¦‚2025-11-07_MORN/AM/PM/EVEï¼‰ |
| `occurrence_count` | Integer | å½’å¹¶å‘¨æœŸå†…å‡ºç°æ¬¡æ•° |
| `merge_status` | String(30) | å½’å¹¶çŠ¶æ€ï¼ˆpending_event_merge/pending_global_merge/merged/discardedï¼›æ¨¡å‹é»˜è®¤å€¼ä»ä¸º pending_halfday_merge å±å†å²å‘½åï¼‰ |
| `embedding_id` | BigInteger | å‘é‡IDï¼ˆå¤–é”®â†’embeddingsè¡¨ï¼‰ |
| `run_id` | String(50) | é‡‡é›†è¿è¡ŒID |

**ç´¢å¼•**ï¼š
- `idx_platform_fetched_at`ï¼šå¹³å°+æŠ“å–æ—¶é—´
- `idx_period_status`ï¼šå½’å¹¶æ—¶æ®µ+å½’å¹¶çŠ¶æ€
- `idx_merge_group`ï¼šå½’å¹¶ç»„ID+å‡ºç°æ¬¡æ•°

**ç‰¹ç‚¹**ï¼š
- æ•°æ®æºå¤´ï¼Œæ‰€æœ‰å¤„ç†éƒ½åŸºäºè¿™å¼ è¡¨
- `dedup_key` åŒ…å« `run_id`ï¼Œç”¨äºä¿è¯åŒä¸€ URL åœ¨ä¸åŒé‡‡é›†æ‰¹æ¬¡ä»ä¼šè½åº“
- éƒ¨åˆ†å¹³å°ï¼ˆsina/hupuï¼‰æ— çƒ­åº¦å€¼ï¼Œå½’ä¸€åŒ–é˜¶æ®µä½¿ç”¨é»˜è®¤å€¼ 0.5
- `merge_status` è·Ÿè¸ªæ•°æ®å¤„ç†çŠ¶æ€ï¼Œå½“å‰ä»¥ `pending_event_merge` ä½œä¸ºé˜¶æ®µä¸€å…¥å£

---

### 2. ğŸ¯ topicsï¼ˆä¸»é¢˜/äº‹ä»¶è¡¨ï¼‰

**ç”¨é€”**ï¼šå­˜å‚¨å½’å¹¶åçš„è¯é¢˜æ ¸å¿ƒä¿¡æ¯

**å…³é”®å­—æ®µ**ï¼š

| å­—æ®µå | ç±»å‹ | è¯´æ˜ |
|--------|------|------|
| `id` | BigInteger | ä¸»é”®ID |
| `title_key` | String(500) | æ ‡é¢˜å½’å¹¶é”® |
| `first_seen` | DateTime | é¦–æ¬¡å‘ç°æ—¶é—´ |
| `last_active` | DateTime | æœ€åæ´»è·ƒæ—¶é—´ |
| `status` | String(20) | çŠ¶æ€ï¼ˆactive/endedï¼‰ |
| `intensity_total` | Integer | å¼ºåº¦æ€»é‡ï¼ˆè¦†ç›–é‡ç´¯åŠ ï¼‰ |
| `interaction_total` | BigInteger | äº’åŠ¨æ€»é‡ |
| `current_heat_normalized` | Float | å½’ä¸€åŒ–çƒ­åº¦å³°å€¼ï¼ˆè·¨å½’å¹¶å‘¨æœŸå–æœ€å¤§ï¼‰ |
| `heat_percentage` | Float | çƒ­åº¦å æ¯”å³°å€¼ï¼ˆ%ï¼‰ |
| `summary_id` | BigInteger | å½“å‰ä¸»é¢˜æ‘˜è¦å¿«ç…§ID |
| `category` | String(50) | åˆ†ç±»ï¼ˆentertainment/current_affairs/sports_esportsï¼‰ |
| `category_confidence` | Float | åˆ†ç±»ç½®ä¿¡åº¦ï¼ˆ0-1ï¼‰ |
| `category_method` | String(20) | åˆ†ç±»æ–¹æ³•ï¼ˆllm/heuristic/manualï¼‰ |
| `category_updated_at` | DateTime | åˆ†ç±»æ›´æ–°æ—¶é—´ |

**å…³ç³»**ï¼š
- `nodes`ï¼šå…³è” `topic_nodes` è¡¨ï¼ˆæ—¶é—´çº¿èŠ‚ç‚¹ï¼‰
- `period_heats`ï¼šå…³è” `topic_period_heat` è¡¨ï¼ˆå‘¨æœŸçƒ­åº¦è®°å½•ï¼‰

**ç´¢å¼•**ï¼š
- `idx_status_last_active`ï¼šçŠ¶æ€+æœ€åæ´»è·ƒæ—¶é—´
- `idx_category_status`ï¼šåˆ†ç±»+çŠ¶æ€
- `idx_heat_normalized`ï¼šçƒ­åº¦å³°å€¼

**ç‰¹ç‚¹**ï¼š
- æ ¸å¿ƒè¡¨ï¼Œä»£è¡¨ä¸€ä¸ªå®Œæ•´çš„çƒ­ç‚¹äº‹ä»¶
- å›å£°æŒ‡æ ‡ï¼ˆå¼ºåº¦ã€æŒç»­æ—¶é—´ï¼‰åœ¨æ­¤è®¡ç®—
- åˆ†ç±»ä¿¡æ¯ç”¨äºé¦–é¡µç»Ÿè®¡å±•ç¤º

---

### 2.1 ğŸ” free_mode_invitesï¼ˆè‡ªç”±æ¨¡å¼é‚€è¯·ç è¡¨ï¼‰

**ç”¨é€”**ï¼šå­˜å‚¨è‡ªç”±æ¨¡å¼é‚€è¯·ç ä¸ä½¿ç”¨æ§åˆ¶

**å…³é”®å­—æ®µ**ï¼š

| å­—æ®µå | ç±»å‹ | è¯´æ˜ |
|--------|------|------|
| `id` | BigInteger | ä¸»é”®ID |
| `code` | String(64) | é‚€è¯·ç ï¼ˆå”¯ä¸€ï¼‰ |
| `status` | String(20) | çŠ¶æ€ï¼ˆactive/disabledï¼‰ |
| `max_uses` | Integer | æœ€å¤§å¯ç”¨æ¬¡æ•°ï¼ˆnull è¡¨ç¤ºä¸é™ï¼‰ |
| `used_count` | Integer | å·²ä½¿ç”¨æ¬¡æ•° |
| `expires_at` | DateTime | è¿‡æœŸæ—¶é—´ |
| `last_used_at` | DateTime | æœ€è¿‘ä½¿ç”¨æ—¶é—´ |
| `note` | Text | å¤‡æ³¨ |
| `created_at` | DateTime | åˆ›å»ºæ—¶é—´ï¼ˆåŸºç±»å­—æ®µï¼‰ |
| `updated_at` | DateTime | æ›´æ–°æ—¶é—´ï¼ˆåŸºç±»å­—æ®µï¼‰ |

**ç‰¹ç‚¹**ï¼š
- ä»…ç”¨äºè·å–è‡ªç”±æ¨¡å¼è®¿é—®ä»¤ç‰Œï¼Œä¸ç›´æ¥å‚ä¸å¯¹è¯æ£€ç´¢
- æ”¯æŒæ¬¡æ•°ä¸æœ‰æ•ˆæœŸé™åˆ¶ï¼›å¦‚æœªè®¾ç½®è¿‡æœŸæ—¶é—´ï¼Œåˆ™æŒ‰åˆ›å»ºæ—¶é—´ + é»˜è®¤ TTL åˆ¤æ–­

---

### 2.2 ğŸ”‘ free_mode_access_tokensï¼ˆè‡ªç”±æ¨¡å¼è®¿é—®ä»¤ç‰Œè¡¨ï¼‰

**ç”¨é€”**ï¼šå­˜å‚¨é€šè¿‡é‚€è¯·ç æ¢å–çš„è®¿é—®ä»¤ç‰Œ

**å…³é”®å­—æ®µ**ï¼š

| å­—æ®µå | ç±»å‹ | è¯´æ˜ |
|--------|------|------|
| `id` | BigInteger | ä¸»é”®ID |
| `token` | String(128) | è®¿é—®ä»¤ç‰Œï¼ˆå”¯ä¸€ï¼‰ |
| `invite_id` | BigInteger | é‚€è¯·ç IDï¼ˆå¤–é”®ï¼‰ |
| `expires_at` | DateTime | è¿‡æœŸæ—¶é—´ |
| `last_used_at` | DateTime | æœ€è¿‘ä½¿ç”¨æ—¶é—´ |
| `revoked` | Boolean | æ˜¯å¦åŠé”€ |
| `created_at` | DateTime | åˆ›å»ºæ—¶é—´ï¼ˆåŸºç±»å­—æ®µï¼‰ |
| `updated_at` | DateTime | æ›´æ–°æ—¶é—´ï¼ˆåŸºç±»å­—æ®µï¼‰ |

**ç‰¹ç‚¹**ï¼š
- `mode=global` è°ƒç”¨ `/chat/ask` æ—¶å¿…é¡»æºå¸¦ `free_token`
- é»˜è®¤æœ‰æ•ˆæœŸ 7 å¤©ï¼ˆå¯é…ç½®ï¼‰

---

### 2.3 ğŸ§© topic_item_mvï¼ˆä¸»é¢˜+æ¥æºç‰©åŒ–è§†å›¾ï¼‰

**ç”¨é€”**ï¼šä¸ºè‡ªç”±æ¨¡å¼ Agent å·¥å…·æä¾›ç»Ÿä¸€æŸ¥è¯¢è§†å›¾ï¼ˆtopic + ä»£è¡¨ itemï¼‰

**å­—æ®µç¤ºä¾‹**ï¼š

| å­—æ®µå | è¯´æ˜ |
|--------|------|
| `topic_id` / `title` / `summary` | ä¸»é¢˜åŸºæœ¬ä¿¡æ¯ |
| `first_seen` / `last_active` / `status` | äº‹ä»¶è·¨åº¦ä¸çŠ¶æ€ |
| `category` / `intensity_total` / `heat_normalized` | åˆ†ç±»ä¸çƒ­åº¦å¼ºåº¦ |
| `echo_length_hours` | å›å£°é•¿åº¦ï¼ˆå°æ—¶ï¼‰ |
| `item_id` / `item_title` / `item_summary` / `item_url` | ä»£è¡¨æ€§æ¥æº |
| `item_platform` / `item_published_at` / `item_fetched_at` | æ¥æºå¹³å°ä¸æ—¶é—´ |

**ç‰¹ç‚¹**ï¼š
- ç”± `topics + summaries + topic_nodes + source_items` èšåˆ
- å½’å¹¶å®Œæˆåé€šè¿‡ `FrontendUpdateService` åˆ·æ–°ç‰©åŒ–è§†å›¾

---

### 3. ğŸ”— topic_nodesï¼ˆä¸»é¢˜æ—¶é—´çº¿èŠ‚ç‚¹è¡¨ï¼‰

**ç”¨é€”**ï¼šè®°å½•è¯é¢˜ä¸åŸå§‹æ–°é—»çš„å…³è”å…³ç³»ï¼Œå½¢æˆæ—¶é—´çº¿

**å…³é”®å­—æ®µ**ï¼š

| å­—æ®µå | ç±»å‹ | è¯´æ˜ |
|--------|------|------|
| `id` | BigInteger | ä¸»é”®ID |
| `topic_id` | BigInteger | ä¸»é¢˜IDï¼ˆå¤–é”®â†’topicsï¼‰ |
| `source_item_id` | BigInteger | æºæ•°æ®é¡¹IDï¼ˆå¤–é”®â†’source_itemsï¼‰ |
| `appended_at` | DateTime | è¿½åŠ æ—¶é—´ |
| `delta_interactions` | Integer | æ–°å¢äº’åŠ¨é‡ |

**çº¦æŸ**ï¼š
- å”¯ä¸€çº¦æŸï¼š`(topic_id, source_item_id)`ï¼Œé˜²æ­¢é‡å¤å…³è”

**ç´¢å¼•**ï¼š
- `idx_topic_appended`ï¼šè¯é¢˜ID+è¿½åŠ æ—¶é—´

**ç‰¹ç‚¹**ï¼š
- æ„å»ºè¯é¢˜çš„å®Œæ•´æ—¶é—´çº¿
- å±•ç¤ºäº‹ä»¶æ¼”è¿›è¿‡ç¨‹
- æ”¯æŒå¢é‡æ›´æ–°

---

### 4. ğŸŒ¡ï¸ topic_period_heatï¼ˆä¸»é¢˜å½’å¹¶å‘¨æœŸçƒ­åº¦è®°å½•è¡¨ï¼‰

**ç”¨é€”**ï¼šè®°å½•æ¯ä¸ªè¯é¢˜åœ¨æ¯ä¸ªå½’å¹¶å‘¨æœŸï¼ˆMORN/AM/PM/EVEï¼‰çš„çƒ­åº¦å˜åŒ–

**å…³é”®å­—æ®µ**ï¼š

| å­—æ®µå | ç±»å‹ | è¯´æ˜ |
|--------|------|------|
| `id` | BigInteger | ä¸»é”®ID |
| `topic_id` | BigInteger | ä¸»é¢˜IDï¼ˆå¤–é”®â†’topicsï¼‰ |
| `date` | Date | æ—¥æœŸ |
| `period` | String(10) | æ—¶æ®µï¼ˆMORN/AM/PM/EVEï¼‰ |
| `heat_normalized` | Float | å½’å¹¶å‘¨æœŸå†…å½’ä¸€åŒ–çƒ­åº¦ï¼ˆ0-1ï¼‰ |
| `heat_percentage` | Float | å å½’å¹¶å‘¨æœŸæ€»çƒ­åº¦ç™¾åˆ†æ¯” |
| `source_count` | Integer | å½’å¹¶å‘¨æœŸå†…çš„source_itemæ•°é‡ |

**çº¦æŸ**ï¼š
- å”¯ä¸€çº¦æŸï¼š`(topic_id, date, period)`

**ç´¢å¼•**ï¼š
- `idx_topic_date_period`ï¼šè¯é¢˜ID+æ—¥æœŸ+æ—¶æ®µ

**ç‰¹ç‚¹**ï¼š
- ç»˜åˆ¶è¯é¢˜çƒ­åº¦è¶‹åŠ¿å›¾ï¼ˆæ¯æ—¥4ä¸ªæ•°æ®ç‚¹ï¼‰
- åˆ†æè¯é¢˜ç”Ÿå‘½å‘¨æœŸå’Œçƒ­åº¦æ³¢åŠ¨
- æ”¯æŒå››å‘¨æœŸç²’åº¦çš„çƒ­åº¦ç»Ÿè®¡ï¼ˆMORN/AM/PM/EVEï¼‰

---

### 5. ğŸ“„ summariesï¼ˆæ‘˜è¦å¿«ç…§è¡¨ï¼‰

**ç”¨é€”**ï¼šå­˜å‚¨è¯é¢˜çš„AIç”Ÿæˆæ‘˜è¦å†å²ç‰ˆæœ¬

**å…³é”®å­—æ®µ**ï¼š

| å­—æ®µå | ç±»å‹ | è¯´æ˜ |
|--------|------|------|
| `id` | BigInteger | ä¸»é”®ID |
| `topic_id` | BigInteger | ä¸»é¢˜IDï¼ˆå¤–é”®â†’topicsï¼‰ |
| `content` | Text | æ‘˜è¦å†…å®¹ |
| `method` | String(20) | ç”Ÿæˆæ–¹æ³•ï¼ˆfull/incremental/placeholderï¼‰ |
| `generated_at` | DateTime | ç”Ÿæˆæ—¶é—´ |
| `provider` | String(50) | LLMæä¾›å•† |
| `model` | String(100) | LLMæ¨¡å‹åç§° |

**ç´¢å¼•**ï¼š
- `idx_topic_generated`ï¼šè¯é¢˜ID+ç”Ÿæˆæ—¶é—´

**ç‰¹ç‚¹**ï¼š
- ä¿å­˜è¯é¢˜æ‘˜è¦çš„å†å²å¿«ç…§
- æ”¯æŒå®Œæ•´ç”Ÿæˆã€å¢é‡ç”Ÿæˆä¸å ä½æ‘˜è¦ï¼ˆæ— èŠ‚ç‚¹æˆ–å¤±è´¥æ—¶ï¼‰
- æ‘˜è¦ä¼šç”Ÿæˆå‘é‡ï¼ˆobject_type=topic_summaryï¼‰ç”¨äºåç»­æ£€ç´¢
- å¯è¿½æº¯æ‘˜è¦å˜åŒ–å†å²

---

### 6. ğŸ“Š runs_ingestï¼ˆé‡‡é›†è¿è¡Œè®°å½•è¡¨ï¼‰

**ç”¨é€”**ï¼šè¿½è¸ªæ¯æ¬¡æ•°æ®é‡‡é›†ä»»åŠ¡çš„æ‰§è¡Œæƒ…å†µ

**å…³é”®å­—æ®µ**ï¼š

| å­—æ®µå | ç±»å‹ | è¯´æ˜ |
|--------|------|------|
| `run_id` | String(50) | è¿è¡ŒIDï¼ˆä¸»é”®ï¼‰ |
| `status` | String(20) | çŠ¶æ€ï¼ˆrunning/success/failed/partialï¼‰ |
| `started_at` | DateTime | å¼€å§‹æ—¶é—´ |
| `ended_at` | DateTime | ç»“æŸæ—¶é—´ |
| `duration_ms` | Integer | æŒç»­æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰ |
| `total_platforms` | Integer | æ€»å¹³å°æ•° |
| `success_platforms` | Integer | æˆåŠŸå¹³å°æ•° |
| `failed_platforms` | Integer | å¤±è´¥å¹³å°æ•° |
| `total_items` | Integer | æ€»æŠ“å–æ¡æ•° |
| `success_items` | Integer | æˆåŠŸè§£ææ¡æ•° |
| `failed_items` | Integer | å¤±è´¥è§£ææ¡æ•° |
| `platform_results` | JSONB | å„å¹³å°ç»“æœè¯¦æƒ… |
| `error_summary` | Text | é”™è¯¯æ±‡æ€» |
| `config` | JSONB | è¿è¡Œé…ç½® |

**ç´¢å¼•**ï¼š
- `idx_status_started`ï¼šçŠ¶æ€+å¼€å§‹æ—¶é—´

**ç‰¹ç‚¹**ï¼š
- ç›‘æ§é‡‡é›†ä»»åŠ¡å¥åº·åº¦
- è¿½è¸ªå„å¹³å°é‡‡é›†æˆåŠŸç‡
- ç”¨äºç³»ç»Ÿè¿ç»´å’Œé—®é¢˜æ’æŸ¥

---

### 7. âš™ï¸ runs_pipelineï¼ˆæµæ°´çº¿è¿è¡Œè®°å½•è¡¨ï¼‰

**ç”¨é€”**ï¼šè¿½è¸ªæ•°æ®å¤„ç†æµæ°´çº¿å„é˜¶æ®µçš„æ‰§è¡Œæƒ…å†µ

**å…³é”®å­—æ®µ**ï¼š

| å­—æ®µå | ç±»å‹ | è¯´æ˜ |
|--------|------|------|
| `run_id` | String(50) | è¿è¡ŒIDï¼ˆä¸»é”®ï¼‰ |
| `stage` | String(50) | é˜¶æ®µï¼ˆevent_merge/global_merge/merge_completed ç­‰ï¼‰ |
| `status` | String(20) | çŠ¶æ€ï¼ˆrunning/success/failed/partialï¼‰ |
| `started_at` | DateTime | å¼€å§‹æ—¶é—´ |
| `ended_at` | DateTime | ç»“æŸæ—¶é—´ |
| `duration_ms` | Integer | æŒç»­æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰ |
| `input_count` | Integer | è¾“å…¥æ•°é‡ |
| `output_count` | Integer | è¾“å‡ºæ•°é‡ |
| `success_count` | Integer | æˆåŠŸæ•°é‡ |
| `failed_count` | Integer | å¤±è´¥æ•°é‡ |
| `results` | JSONB | ç»“æœè¯¦æƒ… |
| `error_summary` | Text | é”™è¯¯æ±‡æ€» |
| `metrics` | JSONB | æ€§èƒ½æŒ‡æ ‡ |

**ç´¢å¼•**ï¼š
- `idx_stage_status`ï¼šé˜¶æ®µ+çŠ¶æ€
- `idx_started_at`ï¼šå¼€å§‹æ—¶é—´

**ç‰¹ç‚¹**ï¼š
- è¿½è¸ªæ•°æ®ä»åŸå§‹é‡‡é›†åˆ°è¯é¢˜ç”Ÿæˆçš„å®Œæ•´å¤„ç†é“¾è·¯
- è®°å½•æ¯ä¸ªé˜¶æ®µçš„æ€§èƒ½æŒ‡æ ‡
- ç”¨äºæµç¨‹ä¼˜åŒ–å’Œé—®é¢˜è¯Šæ–­

---

### 8. ğŸ“ˆ category_day_metricsï¼ˆåˆ†ç±»æ—¥æŒ‡æ ‡è¡¨ï¼‰

**ç”¨é€”**ï¼šå­˜å‚¨æ¯æ—¥å„åˆ†ç±»çš„ç»Ÿè®¡æŒ‡æ ‡ï¼ˆç”¨äºé¦–é¡µå±•ç¤ºï¼‰

**å…³é”®å­—æ®µ**ï¼š

| å­—æ®µå | ç±»å‹ | è¯´æ˜ |
|--------|------|------|
| `day` | Date | æ—¥æœŸ |
| `category` | String(50) | åˆ†ç±» |
| `topics_count` | Integer | è¯é¢˜æ€»æ•° |
| `topics_active` | Integer | æ´»è·ƒè¯é¢˜æ•° |
| `topics_ended` | Integer | å·²ç»“æŸè¯é¢˜æ•° |
| `avg_length_hours` | Float | å¹³å‡å›å£°æ—¶é•¿ï¼ˆå°æ—¶ï¼‰ |
| `max_length_hours` | Float | æœ€é•¿å›å£°æ—¶é•¿ |
| `min_length_hours` | Float | æœ€çŸ­å›å£°æ—¶é•¿ |
| `max_length_topic_id` | BigInteger | æœ€é•¿æ—¶é•¿çš„è¯é¢˜ID |
| `min_length_topic_id` | BigInteger | æœ€çŸ­æ—¶é•¿çš„è¯é¢˜ID |
| `intensity_sum` | Integer | å¼ºåº¦æ€»å’Œ |
| `intensity_avg` | Float | å¹³å‡å¼ºåº¦ |

**ç‰¹ç‚¹**ï¼š
- é¢„è®¡ç®—é¦–é¡µçš„åˆ†ç±»ç»Ÿè®¡æ•°æ®
- æ¯æ—¥å‡Œæ™¨1:00è‡ªåŠ¨é‡ç®—
- æ”¯æŒç¼“å­˜åŠ é€ŸAPIå“åº”

---

### 9. ğŸ§  embeddingsï¼ˆå‘é‡åµŒå…¥è¡¨ï¼‰

**ç”¨é€”**ï¼šå­˜å‚¨å¯¹è±¡çš„å‘é‡è¡¨ç¤ºï¼ˆPostgres + pgvector æ¨¡å¼ï¼‰ï¼Œå½“å‰è¿è¡Œå£å¾„å·²åˆ‡æ¢åˆ° Chroma

**å…³é”®å­—æ®µ**ï¼š

| å­—æ®µå | ç±»å‹ | è¯´æ˜ |
|--------|------|------|
| `id` | BigInteger | ä¸»é”®ID |
| `object_type` | String(50) | å¯¹è±¡ç±»å‹ï¼ˆsource_item/topic_node/topic_summaryï¼‰ |
| `object_id` | BigInteger | å¯¹è±¡ID |
| `provider` | String(50) | å‘é‡æä¾›å•† |
| `model` | String(100) | å‘é‡æ¨¡å‹åç§° |
| `vector` | Vector(4096) | å‘é‡æ•°æ® |

**ç‰¹ç‚¹**ï¼š
- Chroma æ¨¡å¼ä¸‹ä»ä¼šç”Ÿæˆå‘é‡ï¼Œä½†ä¸å†™å…¥è¯¥è¡¨ï¼ˆä½¿ç”¨ Chroma é›†åˆå­˜å‚¨ï¼‰
- object_type=topic_summary çš„å‘é‡ç”¨äº global_merge ä¸ RAG æ£€ç´¢

---

### 10. ğŸ§¾ llm_judgementsï¼ˆLLMåˆ¤å®šè®°å½•è¡¨ï¼‰

**ç”¨é€”**ï¼šè®°å½• LLM åœ¨å½’å¹¶ã€æ‘˜è¦ã€åˆ†ç±»ã€å¯¹è¯é‡æ’ç­‰åœºæ™¯çš„è¯·æ±‚ä¸å“åº”

**å…³é”®å­—æ®µ**ï¼š

| å­—æ®µå | ç±»å‹ | è¯´æ˜ |
|--------|------|------|
| `id` | BigInteger | ä¸»é”®ID |
| `type` | String(50) | ç±»å‹ï¼ˆmerge/summarize/chat_rerank/classifyç­‰ï¼‰ |
| `status` | String(20) | çŠ¶æ€ï¼ˆpending/success/failed/timeoutï¼‰ |
| `request` | JSONB | è¯·æ±‚å†…å®¹ |
| `response` | JSONB | å“åº”å†…å®¹ |
| `error_message` | Text | é”™è¯¯ä¿¡æ¯ |
| `latency_ms` | Integer | å»¶è¿Ÿ |
| `tokens_prompt` | Integer | Prompt Tokenæ•° |
| `tokens_completion` | Integer | Completion Tokenæ•° |
| `provider` | String(50) | æä¾›å•† |
| `model` | String(100) | æ¨¡å‹åç§° |
| `started_at` | DateTime | å¼€å§‹æ—¶é—´ |
| `completed_at` | DateTime | å®Œæˆæ—¶é—´ |

**ç‰¹ç‚¹**ï¼š
- ç”¨äºç›‘æ§ LLM è´¨é‡ä¸æˆæœ¬
- æ”¯æŒå¯¹å½’å¹¶/æ‘˜è¦åˆ¤å®šç»“æœå›æº¯

---

### 11. ğŸ’¬ chatsï¼ˆä¼šè¯è¡¨ï¼‰

**ç”¨é€”**ï¼šè®°å½•å¯¹è¯ä¼šè¯ä¿¡æ¯ï¼ˆæ”¯æŒ global/topic æ¨¡å¼ï¼‰

**å…³é”®å­—æ®µ**ï¼š

| å­—æ®µå | ç±»å‹ | è¯´æ˜ |
|--------|------|------|
| `id` | BigInteger | ä¸»é”®ID |
| `title` | String(200) | ä¼šè¯æ ‡é¢˜ |
| `mode` | String(20) | å¯¹è¯æ¨¡å¼ï¼ˆtopic/globalï¼‰ |
| `topic_id` | BigInteger | å…³è”ä¸»é¢˜IDï¼ˆtopic æ¨¡å¼ï¼‰ |
| `is_active` | Integer | æ˜¯å¦æ´»è·ƒ |
| `created_at` | DateTime | åˆ›å»ºæ—¶é—´ï¼ˆåŸºç±»å­—æ®µï¼‰ |

---

### 12. ğŸ—¨ï¸ chat_messagesï¼ˆå¯¹è¯æ¶ˆæ¯è¡¨ï¼‰

**ç”¨é€”**ï¼šè®°å½•ä¼šè¯ä¸­çš„æ¶ˆæ¯ä¸å›ç­”å…ƒæ•°æ®

**å…³é”®å­—æ®µ**ï¼š

| å­—æ®µå | ç±»å‹ | è¯´æ˜ |
|--------|------|------|
| `id` | BigInteger | ä¸»é”®ID |
| `chat_id` | BigInteger | ä¼šè¯IDï¼ˆå¤–é”®ï¼‰ |
| `role` | String(20) | è§’è‰²ï¼ˆuser/assistant/systemï¼‰ |
| `content` | Text | æ¶ˆæ¯å†…å®¹ |
| `answer_meta` | JSONB | å›ç­”å…ƒæ•°æ®ï¼ˆlatency/tokens/providerç­‰ï¼‰ |
| `sent_at` | DateTime | å‘é€æ—¶é—´ |

---

### 13. ğŸ”– citationsï¼ˆå¼•ç”¨è¡¨ï¼‰

**ç”¨é€”**ï¼šè®°å½•å¯¹è¯å›ç­”çš„å¼•ç”¨æ¥æº

**å…³é”®å­—æ®µ**ï¼š

| å­—æ®µå | ç±»å‹ | è¯´æ˜ |
|--------|------|------|
| `id` | BigInteger | ä¸»é”®ID |
| `message_id` | BigInteger | æ¶ˆæ¯IDï¼ˆå¤–é”®ï¼‰ |
| `topic_id` | BigInteger | ä¸»é¢˜ID |
| `node_id` | BigInteger | èŠ‚ç‚¹ID |
| `source_url` | String(1000) | æ¥æºé“¾æ¥ |
| `snippet` | Text | å¼•ç”¨ç‰‡æ®µ |

---

## æ•°æ®æµè½¬æµç¨‹

### æ•´ä½“æµç¨‹å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        æ•°æ®é‡‡é›†é˜¶æ®µ                              â”‚
â”‚  å®šæ—¶ä»»åŠ¡ï¼šæ¯2å°æ—¶æ‰§è¡Œï¼ˆ8:00, 10:00, 12:00, 14:00, 16:00,      â”‚
â”‚           18:00, 20:00, 22:00ï¼‰                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1. å¤šå¹³å°çˆ¬è™«é‡‡é›†                                                â”‚
â”‚    - å¾®åšã€çŸ¥ä¹ã€ä»Šæ—¥å¤´æ¡ã€æ–°æµªã€ç½‘æ˜“ã€ç™¾åº¦ã€è™æ‰‘               â”‚
â”‚    - æ¯å¹³å°é‡‡é›†30æ¡çƒ­æœ                                          â”‚
â”‚    - è®°å½•åŸå§‹çƒ­åº¦å€¼ã€äº’åŠ¨æ•°æ®                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 2. æ•°æ®å…¥åº“ï¼ˆsource_itemsè¡¨ï¼‰                                   â”‚
â”‚    - è®¡ç®—URLå“ˆå¸Œå’Œå†…å®¹å“ˆå¸Œ                                       â”‚
â”‚    - ç”Ÿæˆdedup_keyï¼ˆåŒ…å«run_idï¼Œä¸åšè·¨æ‰¹æ¬¡å»é‡ï¼‰                 â”‚
â”‚    - è®¾ç½®merge_status = "pending_event_merge"                   â”‚
â”‚    - è®°å½•run_idå…³è”é‡‡é›†ä»»åŠ¡                                     â”‚
â”‚    - è‡ªåŠ¨æ ‡è®°periodï¼ˆMORN/AM/PM/EVEï¼‰                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 3. é‡‡é›†è¿è¡Œè®°å½•ï¼ˆruns_ingestè¡¨ï¼‰                                â”‚
â”‚    - è®°å½•é‡‡é›†å¼€å§‹/ç»“æŸæ—¶é—´                                       â”‚
â”‚    - ç»Ÿè®¡å„å¹³å°æˆåŠŸ/å¤±è´¥æ•°é‡                                     â”‚
â”‚    - ä¿å­˜å¹³å°è¯¦ç»†ç»“æœï¼ˆJSONï¼‰                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    å½’å¹¶é˜¶æ®µï¼ˆæ¯æ—¥4æ¬¡ï¼‰                           â”‚
â”‚  å®šæ—¶ä»»åŠ¡ï¼š08:05/12:05/18:05/22:05ï¼ˆé˜¶æ®µä¸€ï¼‰                    â”‚
â”‚           08:20/12:20/18:20/22:20ï¼ˆé˜¶æ®µäºŒï¼‰                     â”‚
â”‚  å‘¨æœŸåˆ’åˆ†ï¼šMORN(08:00), AM(10/12), PM(14/16/18), EVE(20/22)     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 4. ã€å½’å¹¶é˜¶æ®µä¸€ã€‘æ–°äº‹ä»¶å½’å¹¶ï¼ˆevent_mergeï¼‰                      â”‚
â”‚    - çƒ­åº¦å½’ä¸€åŒ–ï¼ˆMin-Max + å¹³å°æƒé‡ + å…¨å±€å½’ä¸€ï¼‰                 â”‚
â”‚    - æ ‡é¢˜å½’ä¸€åŒ– + 2-gram Jaccard åˆç­›ï¼ˆé˜ˆå€¼ 0.4ï¼‰               â”‚
â”‚    - å‘é‡ç›¸ä¼¼åº¦èšç±»ï¼ˆé˜ˆå€¼ 0.80ï¼‰                                 â”‚
â”‚    - LLM åˆ¤å®šåŒç»„äº‹ä»¶                                            â”‚
â”‚    - è¿‡æ»¤å•æ¬¡å‡ºç°å™ªéŸ³ï¼ˆoccurrence_count < 2ï¼‰                   â”‚
â”‚    - ç”Ÿæˆperiod_merge_group_id                                  â”‚
â”‚    - æ›´æ–°merge_status = "pending_global_merge"                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ã€å½’å¹¶é˜¶æ®µäºŒã€‘å…¨å±€å½’å¹¶                         â”‚
â”‚  å®šæ—¶ä»»åŠ¡ï¼šæ¯æ—¥08:20ï¼ˆMORNï¼‰, 12:20ï¼ˆAMï¼‰, 18:20ï¼ˆPMï¼‰, 22:20ï¼ˆEVEï¼‰ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 5. ä¸å†å²Topicæ¯”å¯¹ï¼ˆglobal_mergeï¼‰                              â”‚
â”‚    - ä¼˜å…ˆä½¿ç”¨ topic_summary å‘é‡æ£€ç´¢å€™é€‰ Topicsï¼ˆTop-K=3ï¼‰       â”‚
â”‚    - ç›¸ä¼¼åº¦é˜ˆå€¼è¿‡æ»¤ï¼ˆé»˜è®¤ 0.5ï¼‰                                  â”‚
â”‚    - LLM å…³è”åˆ¤å®šï¼ˆç½®ä¿¡åº¦é˜ˆå€¼é»˜è®¤ 0.75ï¼‰                         â”‚
â”‚    - åˆ¤æ–­æ˜¯è¿½åŠ åˆ°ç°æœ‰ topic è¿˜æ˜¯åˆ›å»ºæ–° topic                     â”‚
â”‚    - å¯æŒ‰çƒ­åº¦æ¯”ä¾‹ä¿ç•™æ–° topicï¼ˆkeep_ratioï¼‰                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â†“                   â†“
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ 5a. åˆ›å»ºæ–°Topic   â”‚  â”‚ 5b. è¿½åŠ åˆ°ç°æœ‰    â”‚
        â”‚  - æ’å…¥topicsè¡¨   â”‚  â”‚  - æ›´æ–°last_activeâ”‚
        â”‚  - ç”Ÿæˆtitle_key  â”‚  â”‚  - ç´¯åŠ å¼ºåº¦       â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚                   â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 6. åˆ›å»ºæ—¶é—´çº¿èŠ‚ç‚¹ï¼ˆtopic_nodesè¡¨ï¼‰                              â”‚
â”‚    - å…³è”topic_idå’Œsource_item_id                               â”‚
â”‚    - è®°å½•è¿½åŠ æ—¶é—´appended_at                                     â”‚
â”‚    - è®¡ç®—æ–°å¢äº’åŠ¨é‡delta_interactions                            â”‚
â”‚    - æ›´æ–°source_itemsçš„merge_status = "merged"                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 7. è®°å½•å‘¨æœŸçƒ­åº¦ï¼ˆtopic_period_heatè¡¨ï¼‰                          â”‚
â”‚    - è®¡ç®—topicåœ¨å½“å‰å½’å¹¶å‘¨æœŸçš„å½’ä¸€åŒ–çƒ­åº¦                         â”‚
â”‚    - è®¡ç®—çƒ­åº¦å æ¯”ï¼ˆç›¸å¯¹äºæ‰€æœ‰topicï¼‰                             â”‚
â”‚    - ç»Ÿè®¡source_countï¼ˆè¯¥å‘¨æœŸæ–°å¢çš„æ–°é—»æ•°ï¼‰                      â”‚
â”‚    - æ›´æ–°topicçš„current_heat_normalizedå³°å€¼ï¼ˆè‹¥æ›´é«˜ï¼‰            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        åˆ†ç±»ä¸æ‘˜è¦é˜¶æ®µ                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 8. Topicåˆ†ç±»ï¼ˆå¯é€‰ï¼‰                                             â”‚
â”‚    - ä½¿ç”¨LLMå¯¹æ–°topicè¿›è¡Œåˆ†ç±»                                    â”‚
â”‚    - åˆ†ç±»ï¼šå¨±ä¹å…«å¦/ç¤¾ä¼šæ—¶äº‹/ä½“è‚²ç”µç«                            â”‚
â”‚    - è®°å½•åˆ†ç±»ç½®ä¿¡åº¦å’Œæ–¹æ³•ï¼ˆcategory_methodï¼‰                     â”‚
â”‚    - æ›´æ–°topicsè¡¨çš„categoryå­—æ®µ                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 9. AIæ‘˜è¦ç”Ÿæˆï¼ˆsummariesè¡¨ï¼‰                                    â”‚
â”‚    - å…¨é‡ç”Ÿæˆï¼šåŸºäºæ‰€æœ‰timelineèŠ‚ç‚¹ç”Ÿæˆæ‘˜è¦                      â”‚
â”‚    - å¢é‡ç”Ÿæˆï¼šåŸºäºæ–°å¢èŠ‚ç‚¹æ›´æ–°æ‘˜è¦                              â”‚
â”‚    - å¤±è´¥æˆ–æ— èŠ‚ç‚¹æ—¶ç”Ÿæˆå ä½æ‘˜è¦                                  â”‚
â”‚    - è®°å½•ä½¿ç”¨çš„LLMæ¨¡å‹å’Œç”Ÿæˆæ—¶é—´                                 â”‚
â”‚    - ç”Ÿæˆæ‘˜è¦å‘é‡ï¼ˆtopic_summaryï¼‰                               â”‚
â”‚    - æ›´æ–°topicsçš„summary_id                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 10. æµæ°´çº¿è¿è¡Œè®°å½•ï¼ˆruns_pipelineè¡¨ï¼‰                           â”‚
â”‚     - è®°å½•æ¯ä¸ªé˜¶æ®µçš„æ‰§è¡Œæƒ…å†µ                                     â”‚
â”‚     - ç»Ÿè®¡è¾“å…¥/è¾“å‡ºæ•°é‡                                          â”‚
â”‚     - ä¿å­˜æ€§èƒ½æŒ‡æ ‡å’Œé”™è¯¯ä¿¡æ¯                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        å‰ç«¯å±•ç¤ºé˜¶æ®µ                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 11. é¦–é¡µå±•ç¤º                                                     â”‚
â”‚     - å±•ç¤ºåˆ†ç±»ç»Ÿè®¡ï¼ˆä»category_day_metricsè¯»å–ï¼‰                â”‚
â”‚     - æ¯æ—¥1:00è‡ªåŠ¨é‡ç®—åˆ†ç±»æŒ‡æ ‡                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 12. æ¢ç´¢é¡µå±•ç¤º                                                   â”‚
â”‚     - åˆ—è¡¨ï¼šæ˜¾ç¤ºæ´»è·ƒtopicsï¼ˆæŒ‰çƒ­åº¦æ’åºï¼‰                         â”‚
â”‚     - è¯¦æƒ…ï¼šæ˜¾ç¤ºtopicä¿¡æ¯ã€çƒ­åº¦è¶‹åŠ¿ã€æ—¶é—´çº¿                      â”‚
â”‚     - AIå¯¹è¯ï¼šåŸºäºtopicå†…å®¹è¿›è¡Œæ™ºèƒ½é—®ç­”                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## è¡¨å…³ç³»å›¾

### ERå…³ç³»å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   runs_ingest    â”‚ (é‡‡é›†è¿è¡Œè®°å½•)
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚ run_id
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  source_items    â”‚â”€â”€â”€â”€â”€â”€â”€â”€â†’â”‚ embeddings / Chroma     â”‚ (å‘é‡)
â”‚  (é‡‡é›†åŸå­é¡¹)    â”‚embedding_id
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚ period_merge_group_id
         â”‚ (å‘¨æœŸå½’å¹¶)
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     topics       â”‚ (ä¸»é¢˜/äº‹ä»¶)
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚                  â”‚                  â”‚
         â†“                  â†“                  â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   topic_nodes    â”‚  â”‚topic_period_heat â”‚  â”‚    summaries     â”‚
â”‚  (æ—¶é—´çº¿èŠ‚ç‚¹)    â”‚  â”‚ (å‘¨æœŸçƒ­åº¦è®°å½•)   â”‚  â”‚ (æ‘˜è¦å¿«ç…§)       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   source_items   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  topic_item_mv   â”‚ (ç‰©åŒ–è§†å›¾)
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  runs_pipeline   â”‚ (æµæ°´çº¿è¿è¡Œè®°å½•)
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚category_day_metricsâ”‚ (åˆ†ç±»æ—¥æŒ‡æ ‡)
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  llm_judgements  â”‚ (LLMåˆ¤å®š)
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚free_mode_invites â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚free_mode_access_tokensâ”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     chats        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  chat_messages   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   citations      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æ•°æ®æµå‘

```
[çˆ¬è™«é‡‡é›†] 
    â†“
[source_items] â”€â”€â”€â”€â†’ [runs_ingest]
    â†“                     â†“
[å‘é‡åŒ–/Chroma]        [ç›‘æ§é¢æ¿]
    â†“
[å‘¨æœŸå½’å¹¶-é˜¶æ®µä¸€] â”€â”€â”€â”€â†’ [runs_pipeline]
    â†“                     â†“
[å‘¨æœŸå½’å¹¶-é˜¶æ®µäºŒ]      [æµç¨‹ç›‘æ§]
    â†“
[topics] â†â”€â”€â”€ [topic_nodes] â†â”€â”€â”€ [source_items]
    â†“
    â”œâ”€â”€â†’ [topic_period_heat] (çƒ­åº¦è¶‹åŠ¿)
    â”œâ”€â”€â†’ [summaries] (AIæ‘˜è¦/å‘é‡)
    â”œâ”€â”€â†’ [topic_item_mv] (RAGè§†å›¾)
    â””â”€â”€â†’ [category_day_metrics] (åˆ†ç±»ç»Ÿè®¡)
            â†“
        [å‰ç«¯API / Chat API]
            â†“
        [ç”¨æˆ·ç•Œé¢ / å¯¹è¯]
```

---

## å…³é”®æµç¨‹è¯¦è§£

### 1. æ•°æ®é‡‡é›†æµç¨‹

**è§¦å‘æ—¶æœº**ï¼šæ¯2å°æ—¶ï¼ˆ8:00, 10:00, 12:00, 14:00, 16:00, 18:00, 20:00, 22:00ï¼‰

**æ‰§è¡Œæ­¥éª¤**ï¼š

```python
# ä¼ªä»£ç 
def scheduled_ingestion():
    run_id = generate_run_id()
    
    # 1. åˆ›å»ºé‡‡é›†è¿è¡Œè®°å½•
    run = RunIngest(run_id=run_id, status="running")
    db.add(run)
    
    # 2. å¹¶å‘é‡‡é›†å„å¹³å°æ•°æ®
    platforms = ["weibo", "zhihu", "toutiao", "sina", "netease", "baidu", "hupu"]
    results = []
    
    for platform in platforms:
        items = scrape_platform(platform, limit=30)
        
        # 3. å¤„ç†æ¯æ¡æ•°æ®
        for item in items:
            # è¿‡æ»¤å™ªéŸ³æ ‡é¢˜/é“¾æ¥
            if is_noise(item):
                continue
            # è®¡ç®—å“ˆå¸Œ
            url_hash = md5(item.url)
            content_hash = md5(item.title + item.summary)
            # dedup_key åŒ…å« run_idï¼Œç¡®ä¿æ¯æ¬¡é‡‡é›†è®°å½•å¯è¿½è¸ª
            dedup_key = f"{platform}:{url_hash}:{run_id}"
            
            # è®¡ç®—å½’å¹¶æ—¶æ®µï¼ˆMORN/AM/PM/EVEï¼‰
            period = calc_period(now())
            
            # 4. å…¥åº“
            source_item = SourceItem(
                platform=platform,
                title=item.title,
                url=item.url,
                url_hash=url_hash,
                content_hash=content_hash,
                dedup_key=dedup_key,
                merge_status="pending_event_merge",
                run_id=run_id
            )
            db.add(source_item)
        
        results.append({
            "platform": platform,
            "success": len(items),
            "total": 30
        })
    
    # 5. æ›´æ–°è¿è¡Œè®°å½•
    run.status = "success"
    run.ended_at = now()
    run.platform_results = results
    db.commit()
```

**è¾“å‡º**ï¼š
- `source_items` è¡¨æ–°å¢çº¦ 160 æ¡è®°å½•ï¼ˆ7 å¹³å° Ã— 30 æ¡ï¼Œå®é™…æ•°é‡å—çˆ¬è™«è¿”å›ä¸å™ªéŸ³è¿‡æ»¤å½±å“ï¼‰
- `runs_ingest` è¡¨æ–°å¢1æ¡è¿è¡Œè®°å½•

---

### 2. æ–°äº‹ä»¶å½’å¹¶æµç¨‹ï¼ˆé˜¶æ®µä¸€ï¼‰

**è§¦å‘æ—¶æœº**ï¼šæ¯æ—¥08:05ï¼ˆMORNï¼‰, 12:05ï¼ˆAMï¼‰, 18:05ï¼ˆPMï¼‰, 22:05ï¼ˆEVEï¼‰

**æ‰§è¡Œæ­¥éª¤**ï¼š

```python
# ä¼ªä»£ç 
def event_merge(period="AM"):  # period: MORN/AM/PM/EVE
    # 1. ç¡®å®šæ—¶é—´èŒƒå›´ï¼ˆåŸºäºperiodè‡ªåŠ¨åˆ¤æ–­ï¼‰
    date = today()
    period_tag = f"{date}_{period}"
    
    # 2. æŸ¥è¯¢å¾…å½’å¹¶çš„æ•°æ®ï¼ˆå½“å‰å‘¨æœŸï¼‰
    items = db.query(SourceItem).filter(
        SourceItem.period == period_tag,
        SourceItem.merge_status == "pending_event_merge"
    ).all()
    
    # 3. çƒ­åº¦å½’ä¸€åŒ–ï¼ˆå‘¨æœŸå†…ï¼‰
    normalize_heat(items, period=period_tag)
    
    # 4. æ ‡é¢˜å½’ä¸€åŒ– + 2-gram Jaccard åˆç­›
    title_groups = title_jaccard_grouping(items, threshold=0.4)
    
    # 5. å‘é‡ç›¸ä¼¼åº¦èšç±»ï¼ˆåŸºäº Chroma å‘é‡ï¼‰
    embeddings = [get_embedding(item) for item in items]
    clusters = clustering(embeddings, threshold=0.80, seed_groups=title_groups)
    
    # 6. LLM åˆ¤å®šï¼ˆç¡®è®¤åŒç»„äº‹ä»¶ï¼‰
    clusters = llm_judge_clusters(clusters, period=period_tag)
    
    # 7. å‡ºç°æ¬¡æ•°è¿‡æ»¤ï¼ˆå»å™ªï¼‰
    for cluster in clusters:
        if len(cluster) < MIN_OCCURRENCE:  # é»˜è®¤ 2
            # å•æ¬¡å‡ºç°ï¼Œæ ‡è®°ä¸ºå™ªéŸ³
            for item in cluster:
                item.merge_status = "discarded"
        else:
            # å¤šæ¬¡å‡ºç°ï¼Œè¿›å…¥å…¨å±€å½’å¹¶
            group_id = generate_group_id()
            for item in cluster:
                item.period_merge_group_id = group_id
                item.occurrence_count = len(cluster)
                item.merge_status = "pending_global_merge"
    
    db.commit()
```

**è¾“å‡º**ï¼š
- `source_items` çš„ `merge_status` æ›´æ–°ä¸º `"pending_global_merge"` æˆ– `"discarded"`
- ç›¸ä¼¼æ–°é—»åˆ†é…ç›¸åŒçš„ `period_merge_group_id`
- è¿‡æ»¤æ‰å•æ¬¡å‡ºç°çš„å™ªéŸ³æ•°æ®

---

### 3. å…¨å±€å½’å¹¶æµç¨‹ï¼ˆé˜¶æ®µäºŒï¼‰

**è§¦å‘æ—¶æœº**ï¼šæ¯æ—¥08:20ï¼ˆMORNï¼‰, 12:20ï¼ˆAMï¼‰, 18:20ï¼ˆPMï¼‰, 22:20ï¼ˆEVEï¼‰

**æ‰§è¡Œæ­¥éª¤**ï¼š

```python
# ä¼ªä»£ç 
def global_merge(period="AM"):
    # 1. æŸ¥è¯¢å¾…å½’å¹¶çš„ç»„
    groups = db.query(SourceItem.period_merge_group_id).filter(
        SourceItem.merge_status == "pending_global_merge",
        SourceItem.period.like(f"%_{period}")
    ).distinct().all()
    
    for group_id in groups:
        # 3. è·å–è¯¥ç»„çš„source_items
        group_items = db.query(SourceItem).filter(
            SourceItem.period_merge_group_id == group_id
        ).all()

        # 4. å‘é‡æ£€ç´¢å€™é€‰ Topicsï¼ˆä¼˜å…ˆ topic_summary å‘é‡ï¼‰
        candidates = search_topics_by_summary_vector(
            representative=group_items[0],
            top_k=3,
            min_similarity=0.5
        )

        # 5. LLM åˆ¤å®šæ˜¯å¦å…³è”
        decision = llm_judge_relation(group_items[0], candidates, period=period)

        # 6. åˆ¤æ–­æ˜¯å¦åŒ¹é…
        if decision.action == "merge" and decision.confidence >= 0.75:
            # è¿½åŠ åˆ°ç°æœ‰topic
            topic = decision.topic
            topic.last_active = now()
            topic.intensity_total += len(group_items)
            
            # åˆ›å»ºæ—¶é—´çº¿èŠ‚ç‚¹
            for item in group_items:
                node = TopicNode(
                    topic_id=topic.id,
                    source_item_id=item.id,
                    appended_at=now()
                )
                db.add(node)
                item.merge_status = "merged"
        else:
            # åˆ›å»ºæ–°topic
            topic = Topic(
                title_key=group_items[0].title,
                first_seen=min(item.fetched_at for item in group_items),
                last_active=max(item.fetched_at for item in group_items),
                status="active",
                intensity_total=len(group_items)
            )
            db.add(topic)
            db.flush()  # è·å–topic.id
            
            # åˆ›å»ºæ—¶é—´çº¿èŠ‚ç‚¹
            for item in group_items:
                node = TopicNode(
                    topic_id=topic.id,
                    source_item_id=item.id,
                    appended_at=now()
                )
                db.add(node)
                item.merge_status = "merged"
        
        # 7. è®°å½•å‘¨æœŸçƒ­åº¦
        heat = TopicPeriodHeat(
            topic_id=topic.id,
            date=today(),
            period=period,
            heat_normalized=calculate_heat(group_items),
            source_count=len(group_items)
        )
        db.add(heat)

    # 8. å¯é€‰ï¼šæŒ‰çƒ­åº¦æ¯”ä¾‹ç­›é€‰æ–° topic
    downselect_new_topics(keep_ratio=GLOBAL_MERGE_NEW_TOPIC_KEEP_RATIO)

    db.commit()
```

**è¾“å‡º**ï¼š
- æ–°å¢æˆ–æ›´æ–° `topics` è¡¨è®°å½•
- æ–°å¢ `topic_nodes` è¡¨è®°å½•ï¼ˆå…³è”å…³ç³»ï¼‰
- æ–°å¢ `topic_period_heat` è¡¨è®°å½•ï¼ˆå‘¨æœŸçƒ­åº¦å¿«ç…§ï¼‰
- `source_items` çš„ `merge_status` æ›´æ–°ä¸º `"merged"`
- æŒ‰éœ€è§¦å‘æ‘˜è¦ç”Ÿæˆã€åˆ†ç±»ä¸æ‘˜è¦å‘é‡æ›´æ–°
- å½’å¹¶å®Œæˆååˆ·æ–° `topic_item_mv` ä¸å½“æ—¥ `category_day_metrics`

---

### 4. åˆ†ç±»ç»Ÿè®¡æµç¨‹

**è§¦å‘æ—¶æœº**ï¼šæ¯æ—¥å‡Œæ™¨1:00ï¼›global_merge å®Œæˆåä¼šåˆ·æ–°å½“æ—¥æŒ‡æ ‡ç¼“å­˜

**æ‰§è¡Œæ­¥éª¤**ï¼š

```python
# ä¼ªä»£ç 
def daily_recompute_metrics():
    categories = ["entertainment", "current_affairs", "sports_esports"]
    today = date.today()
    
    for category in categories:
        # 1. æŸ¥è¯¢è¿‘ä¸€å¹´è¯¥åˆ†ç±»çš„topics
        one_year_ago = today - timedelta(days=365)
        topics = db.query(Topic).filter(
            Topic.category == category,
            Topic.first_seen >= one_year_ago
        ).all()
        
        if not topics:
            continue
        
        # 2. è®¡ç®—å›å£°æ—¶é•¿
        lengths = []
        for topic in topics:
            length_hours = (topic.last_active - topic.first_seen).total_seconds() / 3600
            lengths.append(length_hours)
        
        # 3. è®¡ç®—ç»Ÿè®¡æŒ‡æ ‡
        metrics = CategoryDayMetrics(
            day=today,
            category=category,
            topics_count=len(topics),
            topics_active=sum(1 for t in topics if t.status == "active"),
            topics_ended=sum(1 for t in topics if t.status == "ended"),
            avg_length_hours=mean(lengths),
            max_length_hours=max(lengths),
            min_length_hours=min(lengths),
            intensity_sum=sum(t.intensity_total for t in topics),
            intensity_avg=mean(t.intensity_total for t in topics)
        )
        
        db.add(metrics)
    
    db.commit()
```

**è¾“å‡º**ï¼š
- `category_day_metrics` è¡¨æ–°å¢3æ¡è®°å½•ï¼ˆæ¯ä¸ªåˆ†ç±»1æ¡ï¼‰
- ä¾›é¦–é¡µAPIå¿«é€Ÿè¯»å–

---

### 5. AIæ‘˜è¦ç”Ÿæˆæµç¨‹

**è§¦å‘æ—¶æœº**ï¼š
- æ–°topicåˆ›å»ºåï¼ˆå…¨é‡ç”Ÿæˆï¼‰
- topicæ›´æ–°åï¼ˆå¢é‡ç”Ÿæˆï¼‰

**æ‰§è¡Œæ­¥éª¤**ï¼š

```python
# ä¼ªä»£ç 
def generate_summary(topic_id, method="full"):
    topic = db.query(Topic).get(topic_id)
    
    # 1. è·å–æ—¶é—´çº¿å†…å®¹
    nodes = db.query(TopicNode).filter(
        TopicNode.topic_id == topic_id
    ).order_by(TopicNode.appended_at).all()
    
    source_items = [node.source_item for node in nodes]
    if not source_items:
        return create_placeholder_summary(topic)
    
    # 2. æ„å»ºæç¤ºè¯
    if method == "full":
        # å…¨é‡ç”Ÿæˆï¼šåŸºäºæ‰€æœ‰èŠ‚ç‚¹
        prompt = f"""
        è¯·ä¸ºä»¥ä¸‹äº‹ä»¶ç”Ÿæˆæ‘˜è¦ï¼š
        æ ‡é¢˜ï¼š{topic.title_key}
        ç›¸å…³æ–°é—»ï¼š
        {format_items(source_items)}
        
        è¯·æä¾›ï¼š
        1. äº‹ä»¶æ‘˜è¦ï¼ˆ100å­—å†…ï¼‰
        2. å…³é”®ç‚¹ï¼ˆ3-5æ¡ï¼‰
        3. ç›¸å…³å®ä½“ï¼ˆäººç‰©ã€æœºæ„ã€åœ°ç‚¹ï¼‰
        """
    else:
        # å¢é‡ç”Ÿæˆï¼šåŸºäºæ—§æ‘˜è¦+æ–°èŠ‚ç‚¹
        old_summary = db.query(Summary).get(topic.summary_id)
        new_items = [item for item in source_items if item.fetched_at > old_summary.generated_at]
        
        prompt = f"""
        åŸæ‘˜è¦ï¼š{old_summary.content}
        
        æ–°å¢ä¿¡æ¯ï¼š
        {format_items(new_items)}
        
        è¯·æ›´æ–°æ‘˜è¦ï¼Œæ•´åˆæ–°ä¿¡æ¯ã€‚
        """
    
    # 3. è°ƒç”¨LLM
    response = llm_client.generate(prompt)
    
    # 4. ä¿å­˜æ‘˜è¦
    summary = Summary(
        topic_id=topic_id,
        content=response["summary"],
        method=method,
        generated_at=now(),
        provider=llm_client.provider,
        model=llm_client.model
    )
    db.add(summary)
    db.flush()

    # 4.1 ç”Ÿæˆæ‘˜è¦å‘é‡ï¼ˆtopic_summaryï¼‰
    create_summary_embedding(summary)
    
    # 5. æ›´æ–°topicçš„summary_id
    topic.summary_id = summary.id

    # 6. è®°å½• LLM åˆ¤å®š
    record_llm_judgement(type="summarize_full_or_incremental", request=prompt, response=response)
    
    db.commit()
    
    return summary
```

**è¾“å‡º**ï¼š
- `summaries` è¡¨æ–°å¢1æ¡æ‘˜è¦è®°å½•ï¼ˆæˆ–å ä½æ‘˜è¦ï¼‰
- `topics` çš„ `summary_id` æ›´æ–°
- `embeddings/Chroma` æ–°å¢ topic_summary å‘é‡

---

### 6. å¯¹è¯ / RAG æµç¨‹

**è§¦å‘æ—¶æœº**ï¼š
- ç”¨æˆ·è°ƒç”¨ `/chat/ask` æˆ–åˆ›å»ºä¼šè¯ `/chat/create`

**æ‰§è¡Œæ­¥éª¤**ï¼š
1. **é‰´æƒ**ï¼š`mode=global` éœ€æ ¡éªŒ `free_mode_access_tokens`ï¼›`mode=topic` ç›´æ¥ä½¿ç”¨ `topic_id`
2. **æ£€ç´¢**ï¼šåŸºäº `topic_summary` å‘é‡ä¸ `topic_item_mv` è§†å›¾è¿›è¡Œå€™é€‰å¬å›
3. **é‡æ’åº/å‹ç¼©**ï¼šå¯é€‰å¯ç”¨ rerank ä¸ä¸Šä¸‹æ–‡ token ä¼˜åŒ–
4. **ç”Ÿæˆ**ï¼šè°ƒç”¨ LLM ç”Ÿæˆç­”æ¡ˆï¼Œè®°å½• token/å»¶è¿Ÿç­‰è¯Šæ–­ä¿¡æ¯
5. **è½åº“**ï¼šå†™å…¥ `chats`ã€`chat_messages` ä¸ `citations`

**è¾“å‡º**ï¼š
- è¿”å›å›ç­”å†…å®¹ + å¼•ç”¨åˆ—è¡¨ + è¯Šæ–­ä¿¡æ¯ï¼ˆå¯é€‰ SSE æµå¼è¾“å‡ºï¼‰

## ç›‘æ§ä¸è¿ç»´

### ç³»ç»Ÿå¥åº·åº¦æ£€æŸ¥

**æ£€æŸ¥é‡‡é›†ä»»åŠ¡çŠ¶æ€**ï¼š
```sql
-- ä»Šå¤©çš„é‡‡é›†è®°å½•
SELECT 
    run_id,
    status,
    started_at,
    success_platforms || '/' || total_platforms AS platforms,
    success_items || '/' || total_items AS items
FROM runs_ingest
WHERE started_at >= CURRENT_DATE
ORDER BY started_at;
```

**æ£€æŸ¥æµæ°´çº¿æ‰§è¡ŒçŠ¶æ€**ï¼š
```sql
-- æœ€è¿‘çš„æµæ°´çº¿ä»»åŠ¡
SELECT 
    stage,
    status,
    started_at,
    success_count || '/' || input_count AS progress,
    duration_ms / 1000.0 AS duration_sec
FROM runs_pipeline
WHERE started_at >= CURRENT_DATE
ORDER BY started_at DESC;
```

**æ£€æŸ¥æ•°æ®å¤„ç†è¿›åº¦**ï¼š
```sql
-- source_itemsçš„å½’å¹¶çŠ¶æ€åˆ†å¸ƒ
SELECT 
    merge_status,
    COUNT(*) AS count
FROM source_items
WHERE fetched_at >= CURRENT_DATE
GROUP BY merge_status;
```

### å¸¸è§é—®é¢˜æ’æŸ¥

**é—®é¢˜1ï¼šé‡‡é›†ä»»åŠ¡å¤±è´¥**
```bash
# æŸ¥çœ‹Workeræ—¥å¿—
tail -100 celery_worker.log | grep scheduled_ingestion

# æŸ¥çœ‹å¤±è´¥åŸå› 
SELECT run_id, error_summary FROM runs_ingest WHERE status = 'failed';
```

**é—®é¢˜2ï¼šå½’å¹¶ä»»åŠ¡å¡ä½**
```sql
-- æ£€æŸ¥å¾…å½’å¹¶çš„æ•°æ®é‡
SELECT 
    period,
    merge_status,
    COUNT(*) 
FROM source_items 
WHERE merge_status LIKE 'pending%'
GROUP BY period, merge_status;
```

**é—®é¢˜3ï¼šåˆ†ç±»ç»Ÿè®¡ä¸ºç©º**
```sql
-- æ£€æŸ¥åˆ†ç±»æŒ‡æ ‡è¡¨
SELECT * FROM category_day_metrics ORDER BY day DESC LIMIT 10;

-- æ‰‹åŠ¨è§¦å‘é‡ç®—
-- é€šè¿‡APIè°ƒç”¨ï¼šPOST /api/v1/categories/metrics/recompute
```

---

## æ€§èƒ½ä¼˜åŒ–å»ºè®®

### æ•°æ®åº“ç´¢å¼•

å·²åˆ›å»ºçš„å…³é”®ç´¢å¼•ï¼š
- `source_items.idx_platform_fetched_at`ï¼šåŠ é€Ÿå¹³å°æ•°æ®æŸ¥è¯¢
- `source_items.idx_period_status`ï¼šåŠ é€Ÿå½’å¹¶æŸ¥è¯¢
- `topics.idx_status_last_active`ï¼šåŠ é€Ÿæ´»è·ƒè¯é¢˜æŸ¥è¯¢
- `topic_nodes.idx_topic_appended`ï¼šåŠ é€Ÿæ—¶é—´çº¿æŸ¥è¯¢

### æ•°æ®æ¸…ç†ç­–ç•¥

**å®šæœŸæ¸…ç†æ—§æ•°æ®**ï¼š
```sql
-- æ¸…ç†3ä¸ªæœˆå‰å·²å½’å¹¶çš„source_items
DELETE FROM source_items 
WHERE fetched_at < CURRENT_DATE - INTERVAL '90 days'
  AND merge_status = 'merged';

-- æ¸…ç†6ä¸ªæœˆå‰å·²ç»“æŸçš„topics
DELETE FROM topics 
WHERE status = 'ended' 
  AND last_active < CURRENT_DATE - INTERVAL '180 days';
```

### ç¼“å­˜ç­–ç•¥

**é¦–é¡µåˆ†ç±»ç»Ÿè®¡**ï¼š
- ä½¿ç”¨ `category_day_metrics` é¢„è®¡ç®—è¡¨
- æ¯æ—¥1:00è‡ªåŠ¨æ›´æ–°
- APIä¼˜å…ˆè¯»å–ç¼“å­˜ï¼Œé™ä½å®æ—¶è®¡ç®—å‹åŠ›

**çƒ­é—¨è¯é¢˜åˆ—è¡¨**ï¼š
- æŒ‰ `current_heat_normalized`ï¼ˆå³°å€¼ï¼‰æ’åº
- ç´¢å¼•ä¼˜åŒ–æŸ¥è¯¢æ€§èƒ½
- è€ƒè™‘ä½¿ç”¨Redisç¼“å­˜Top 50

---

## é™„å½•

### æ—¶é—´è®¾ç½®è¯´æ˜

**ç³»ç»Ÿæ—¶åŒº**ï¼šAsia/Shanghaiï¼ˆUTC+8ï¼Œå­˜å‚¨ä¸º naive datetimeï¼‰  
**ç”¨æˆ·æ—¶åŒº**ï¼šAsia/Shanghaiï¼ˆUTC+8ï¼‰  
**Celeryæ—¶åŒºé…ç½®**ï¼š`timezone="Asia/Shanghai"`ï¼ˆ`enable_utc=False`ï¼‰

**å®šæ—¶ä»»åŠ¡æ—¶é—´è¡¨**ï¼ˆåŒ—äº¬æ—¶é—´ï¼‰ï¼š

| ä»»åŠ¡ | æ—¶é—´ | è¯´æ˜ |
|------|------|------|
| æ•°æ®é‡‡é›† | 08:00, 10:00, 12:00, 14:00, 16:00, 18:00, 20:00, 22:00 | æ¯2å°æ—¶ |
| æ¸…æ™¨å½’å¹¶ï¼ˆé˜¶æ®µä¸€ï¼‰ | 08:05 | å½’å¹¶ 08:00 çš„ MORN æ•°æ® |
| æ¸…æ™¨æ•´ä½“å½’å¹¶ï¼ˆé˜¶æ®µäºŒï¼‰ | 08:20 | ä¸å†å² topic æ¯”å¯¹ |
| ä¸Šåˆå½’å¹¶ï¼ˆé˜¶æ®µä¸€ï¼‰ | 12:05 | å½’å¹¶ 10:00/12:00 çš„ AM æ•°æ® |
| ä¸Šåˆæ•´ä½“å½’å¹¶ï¼ˆé˜¶æ®µäºŒï¼‰ | 12:20 | ä¸å†å² topic æ¯”å¯¹ |
| ä¸‹åˆå½’å¹¶ï¼ˆé˜¶æ®µä¸€ï¼‰ | 18:05 | å½’å¹¶ 14:00/16:00/18:00 çš„ PM æ•°æ® |
| ä¸‹åˆæ•´ä½“å½’å¹¶ï¼ˆé˜¶æ®µäºŒï¼‰ | 18:20 | ä¸å†å² topic æ¯”å¯¹ |
| å‚æ™šå½’å¹¶ï¼ˆé˜¶æ®µä¸€ï¼‰ | 22:05 | å½’å¹¶ 20:00/22:00 çš„ EVE æ•°æ® |
| å‚æ™šæ•´ä½“å½’å¹¶ï¼ˆé˜¶æ®µäºŒï¼‰ | 22:20 | ä¸å†å² topic æ¯”å¯¹ |
| åˆ†ç±»æŒ‡æ ‡é‡ç®— | 01:00 | æ¯æ—¥é‡ç®— |

### æ•°æ®æºè¯´æ˜

| å¹³å° | é‡‡é›†å†…å®¹ | æ¯æ¬¡é‡‡é›†æ•° |
|------|---------|-----------|
| å¾®åš | çƒ­æœæ¦œ | é»˜è®¤30æ¡ï¼ˆå®é™…ä¾å¹³å°è¿”å›ï¼‰ |
| çŸ¥ä¹ | çƒ­æ¦œ | é»˜è®¤30æ¡ï¼ˆå®é™…ä¾å¹³å°è¿”å›ï¼‰ |
| ä»Šæ—¥å¤´æ¡ | çƒ­æ¦œ | é»˜è®¤30æ¡ï¼ˆå®é™…ä¾å¹³å°è¿”å›ï¼‰ |
| æ–°æµªæ–°é—» | æ’è¡Œæ¦œ | é»˜è®¤30æ¡ï¼ˆå®é™…ä¾å¹³å°è¿”å›ï¼‰ |
| ç½‘æ˜“æ–°é—» | æ’è¡Œæ¦œ | é»˜è®¤30æ¡ï¼ˆå®é™…ä¾å¹³å°è¿”å›ï¼‰ |
| ç™¾åº¦ | çƒ­æœæ¦œ | é»˜è®¤30æ¡ï¼ˆå®é™…ä¾å¹³å°è¿”å›ï¼‰ |
| è™æ‰‘ | çƒ­å¸–æ¦œ | é»˜è®¤30æ¡ï¼ˆå®é™…ä¾å¹³å°è¿”å›ï¼‰ |

**æ€»è®¡**ï¼šæ¯æ¬¡é‡‡é›†çº¦ 7 å¹³å° Ã— 30 æ¡ï¼ˆå®é™…å…¥åº“æ•°é‡å—å¹³å°è¿”å›ä¸å™ªéŸ³è¿‡æ»¤å½±å“ï¼‰

---

## æ›´æ–°æ—¥å¿—

**v2.1 (2026-02-04)**
- ä¸ backend å®ç°å¯¹é½ï¼ševent_merge/global_mergeã€çƒ­åº¦å½’ä¸€åŒ–ä¸ Chroma
- å¢è¡¥å¯¹è¯/LLM åˆ¤å®šä¸æ–°è¡¨ç»“æ„è¯´æ˜

**v1.0 (2025-11-04)**
- åˆå§‹ç‰ˆæœ¬
- å®Œæ•´çš„æ•°æ®æµè½¬æ¶æ„è¯´æ˜
- åŒ…å«æ‰€æœ‰æ ¸å¿ƒè¡¨ç»“æ„å’Œæµç¨‹

---

**æ–‡æ¡£ç»´æŠ¤**ï¼šæœ¬æ–‡æ¡£åº”éšç³»ç»Ÿæ¶æ„å˜åŒ–åŠæ—¶æ›´æ–°
